<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini 2.5D Roblox</title>
<style>
  body { margin:0; overflow:hidden; }
  canvas { display:block; }
  #score { position:absolute; top:10px; left:10px; font-size:20px; color:white; z-index:100; }
  #instructions { position:absolute; top:50%; width:100%; text-align:center; font-size:20px; color:white; }
</style>
</head>
<body>
<div id="score">Puan: 0</div>
<div id="instructions">Tıklayın ve fare ile bakın. WASD ile hareket edin.</div>
<script src="https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.154.0/examples/js/controls/PointerLockControls.js"></script>

<script>
// Scene ve renderer
let scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);
let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// ışık
let light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(10,20,10);
scene.add(light);

// zemin
let floorGeo = new THREE.BoxGeometry(50,1,50);
let floorMat = new THREE.MeshStandardMaterial({color:0x228B22});
let floor = new THREE.Mesh(floorGeo,floorMat);
floor.position.y = -0.5;
scene.add(floor);

// karakter
let playerGeo = new THREE.BoxGeometry(1,2,1);
let playerMat = new THREE.MeshStandardMaterial({color:0xff0000});
let player = new THREE.Mesh(playerGeo,playerMat);
player.position.y = 1;
scene.add(player);

// engeller
let obstacles = [];
for(let i=0;i<5;i++){
  let geo = new THREE.BoxGeometry(2,2,2);
  let mat = new THREE.MeshStandardMaterial({color:0x8B4513});
  let box = new THREE.Mesh(geo,mat);
  box.position.set(Math.random()*40-20,1,Math.random()*40-20);
  scene.add(box);
  obstacles.push(box);
}

// toplama nesneleri
let collectibles = [];
for(let i=0;i<5;i++){
  let geo = new THREE.SphereGeometry(0.5,16,16);
  let mat = new THREE.MeshStandardMaterial({color:0xffff00});
  let sphere = new THREE.Mesh(geo,mat);
  sphere.position.set(Math.random()*40-20,0.5,Math.random()*40-20);
  scene.add(sphere);
  collectibles.push(sphere);
}

// skor
let score = 0;
const scoreDiv = document.getElementById('score');

// pointer lock controls
let controls = new THREE.PointerLockControls(camera, document.body);
document.getElementById('instructions').addEventListener('click', ()=>{
  controls.lock();
  document.getElementById('instructions').style.display = 'none';
});

// hareket
let move = {forward:false,back:false,left:false,right:false};
document.addEventListener('keydown',(e)=>{
  if(e.key==='w') move.forward=true;
  if(e.key==='s') move.back=true;
  if(e.key==='a') move.left=true;
  if(e.key==='d') move.right=true;
});
document.addEventListener('keyup',(e)=>{
  if(e.key==='w') move.forward=false;
  if(e.key==='s') move.back=false;
  if(e.key==='a') move.left=false;
  if(e.key==='d') move.right=false;
});

// resize
window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

// animasyon
function animate(){
  requestAnimationFrame(animate);

  // karakter hareketi
  let speed = 0.2;
  if(move.forward) player.position.z -= speed;
  if(move.back) player.position.z += speed;
  if(move.left) player.position.x -= speed;
  if(move.right) player.position.x += speed;

  // kamera oyuncuya
  camera.position.set(player.position.x, player.position.y+1, player.position.z);

  // toplama kontrolü
  collectibles = collectibles.filter(c=>{
    if(c.position.distanceTo(player.position)<1){
      score++;
      scoreDiv.textContent = "Puan: "+score;
      scene.remove(c);
      return false;
    }
    return true;
  });

  renderer.render(scene,camera);
}
animate();
</script>
</body>
</html>
